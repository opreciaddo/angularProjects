"use strict";(self.webpackChunkappsBundle=self.webpackChunkappsBundle||[]).push([[947],{5947:(z,m,p)=>{p.r(m),p.d(m,{MapasModule:()=>b});var l=p(6895),d=p(6771),c=p(9898),o=p(8256);let u=(()=>{class e{ngOnInit(){new c.Map({container:"mapa",style:"mapbox://styles/mapbox/streets-v12",center:[-100.31,20.65],zoom:14})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-full-screen"]],decls:1,vars:0,consts:[["id","mapa"]],template:function(t,a){1&t&&o._UZ(0,"div",0)},styles:["#mapa[_ngcontent-%COMP%]{height:100%;width:100%}"]}),e})();const g=["mapa"];let f=(()=>{class e{constructor(){this.zoomLevel=14,this.centerLatLng=[-100.31,20.65]}ngAfterViewInit(){this.mapa=new c.Map({container:this.mapaEncontrado.nativeElement,style:"mapbox://styles/mapbox/streets-v12",center:this.centerLatLng,zoom:this.zoomLevel}),this.mapa.on("zoom",()=>this.zoomLevel=this.mapa.getZoom()),this.mapa.on("zoomend",()=>{this.mapa.getZoom()>17&&this.mapa.zoomTo(17)}),this.mapa.on("move",t=>{const a=t.target,{lng:r,lat:i}=a.getCenter();this.centerLatLng=[r,i]})}ngOnDestroy(){this.mapa.off("zoom",()=>{}),this.mapa.off("zoomend",()=>{}),this.mapa.off("move",()=>{})}zoomOut(){this.mapa.zoomOut()}zoomIn(){this.mapa.zoomIn()}zoomCambio(t){this.mapa.zoomTo(Number(t))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-zoom"]],viewQuery:function(t,a){if(1&t&&o.Gf(g,5),2&t){let r;o.iGM(r=o.CRH())&&(a.mapaEncontrado=r.first)}},decls:22,vars:13,consts:[["id","mapa",1,"mapa-container"],["mapa",""],[1,"row"],[1,"col-12"],[1,"form-label",2,"color","black"],["type","range","min","0","max","17",1,"form-range",3,"value","input"],["zoomInput",""],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-primary","float-end",3,"click"]],template:function(t,a){if(1&t){const r=o.EpF();o._UZ(0,"div",0,1),o.TgZ(2,"div",2)(3,"div",3)(4,"label",4)(5,"b"),o._uU(6,"Zoom"),o.qZA(),o._uU(7),o.ALo(8,"number"),o._UZ(9,"br"),o.TgZ(10,"b"),o._uU(11,"[Lng, Lat]"),o.qZA(),o._uU(12),o.ALo(13,"number"),o.ALo(14,"number"),o.qZA(),o.TgZ(15,"input",5,6),o.NdJ("input",function(){o.CHM(r);const s=o.MAs(16);return o.KtG(a.zoomCambio(s.value))}),o.qZA()(),o.TgZ(17,"div",3)(18,"button",7),o.NdJ("click",function(){return a.zoomOut()}),o._uU(19,"-"),o.qZA(),o.TgZ(20,"button",8),o.NdJ("click",function(){return a.zoomIn()}),o._uU(21,"+"),o.qZA()()()}2&t&&(o.xp6(7),o.hij(": ",o.xi3(8,4,a.zoomLevel,"2.0-2")," "),o.xp6(5),o.AsE(": [",o.xi3(13,7,a.centerLatLng[0],"2.0-2"),", ",o.xi3(14,10,a.centerLatLng[1],"2.0-2"),"] "),o.xp6(3),o.Q6J("value",a.zoomLevel))},dependencies:[l.JJ],styles:[".mapa-container[_ngcontent-%COMP%]{height:100%;width:100%}.row[_ngcontent-%COMP%]{width:300px;background-color:#fff;border-radius:5px;bottom:50px;left:50px;padding:10px;position:fixed;z-index:999}"]}),e})();const h=["mapa"],_=function(e){return{"background-color":e}};function M(e,n){if(1&e){const t=o.EpF();o.TgZ(0,"li",5),o.NdJ("click",function(){const i=o.CHM(t).$implicit,s=o.oxw();return o.KtG(s.centrarMarcador(i.marker))})("dblclick",function(){const i=o.CHM(t).index,s=o.oxw();return o.KtG(s.borrarMarcador(i))}),o._uU(1),o.qZA()}if(2&e){const a=n.index;o.Q6J("ngStyle",o.VKq(2,_,n.$implicit.color)),o.xp6(1),o.hij(" Marker ",a+1," ")}}let L=(()=>{class e{constructor(){this.zoomLevel=15,this.centerLatLng=[-100.31,20.65],this.marcadores=[]}ngAfterViewInit(){this.mapa=new c.Map({container:this.mapaEncontrado.nativeElement,style:"mapbox://styles/mapbox/streets-v12",center:this.centerLatLng,zoom:this.zoomLevel}),this.leerLocalStorage()}agregarMarcador(){const t="#xxxxxx".replace(/x/g,r=>(16*Math.random()|0).toString(16)),a=new c.Marker({draggable:!0,color:t}).setLngLat(this.centerLatLng).addTo(this.mapa);this.marcadores.push({color:t,marker:a}),this.guardarMarcadoresLocalStorage(),a.on("dragend",()=>{this.guardarMarcadoresLocalStorage()})}centrarMarcador(t){this.mapa.flyTo({center:t.getLngLat()})}guardarMarcadoresLocalStorage(){const t=[];this.marcadores.forEach(a=>{const r=a.color,{lng:i,lat:s}=a.marker.getLngLat();t.push({color:r,centro:[i,s]})}),localStorage.setItem("marcadores",JSON.stringify(t))}leerLocalStorage(){localStorage.getItem("marcadores")&&JSON.parse(localStorage.getItem("marcadores")).forEach(a=>{const r=new c.Marker({color:a.color,draggable:!0}).setLngLat(a.centro).addTo(this.mapa);this.marcadores.push({marker:r,color:a.color}),r.on("dragend",()=>{this.guardarMarcadoresLocalStorage()})})}borrarMarcador(t){this.marcadores[t].marker?.remove(),this.marcadores.splice(t,1),this.guardarMarcadoresLocalStorage()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-marcadores"]],viewQuery:function(t,a){if(1&t&&o.Gf(h,5),2&t){let r;o.iGM(r=o.CRH())&&(a.mapaEncontrado=r.first)}},decls:7,vars:1,consts:[[1,"list-group"],[1,"list-group-item","list-group-item-dark",3,"click"],["class","list-group-item",3,"ngStyle","click","dblclick",4,"ngFor","ngForOf"],["id","mapa",1,"mapa-container"],["mapa",""],[1,"list-group-item",3,"ngStyle","click","dblclick"]],template:function(t,a){1&t&&(o.TgZ(0,"div",0)(1,"li",1),o.NdJ("click",function(){return a.agregarMarcador()}),o.TgZ(2,"b"),o._uU(3,"+ Marker"),o.qZA()(),o.YNc(4,M,2,4,"li",2),o.qZA(),o._UZ(5,"div",3,4)),2&t&&(o.xp6(4),o.Q6J("ngForOf",a.marcadores))},dependencies:[l.sg,l.PC],styles:[".mapa-container[_ngcontent-%COMP%]{height:100%;width:100%}.list-group[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:999;cursor:pointer}.list-group-item[_ngcontent-%COMP%]{color:#fff}"]}),e})();const C=["mapa"];let v=(()=>{class e{constructor(){this.inLngLat=[0,0]}ngAfterViewInit(){const t=new c.Map({container:this.mapaEncontrado.nativeElement,style:"mapbox://styles/mapbox/streets-v12",center:this.inLngLat,zoom:15,interactive:!1});(new c.Marker).setLngLat(this.inLngLat).addTo(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-mini-mapa"]],viewQuery:function(t,a){if(1&t&&o.Gf(C,5),2&t){let r;o.iGM(r=o.CRH())&&(a.mapaEncontrado=r.first)}},inputs:{inLngLat:"inLngLat"},decls:2,vars:0,consts:[["mapa",""]],template:function(t,a){1&t&&o._UZ(0,"div",null,0)},styles:["div[_ngcontent-%COMP%]{width:100%;height:150px;margin:0}"]}),e})();function x(e,n){if(1&e&&(o.TgZ(0,"div",5)(1,"div",6),o._UZ(2,"app-mini-mapa",7),o.TgZ(3,"div",8)(4,"h5",9),o._uU(5),o.qZA(),o.TgZ(6,"p",10),o._uU(7),o.qZA()()()()),2&e){const t=n.$implicit;o.xp6(2),o.Q6J("inLngLat",t.lngLat),o.xp6(3),o.Oqu(t.titulo),o.xp6(2),o.Oqu(t.descripcion)}}const Z=[{path:"",children:[{path:"fullscreen",component:u},{path:"zoom",component:f},{path:"marcadores",component:L},{path:"propiedades",component:(()=>{class e{constructor(){this.propiedades=[{titulo:"Casa residencial, Canad\xe1",descripcion:"Bella propiedad en Katana, Canad\xe1",lngLat:[-75.92722289474008,45.280015511264466]},{titulo:"Casa de playa, M\xe9xico",descripcion:"Hermosa casa de playa en Acapulco, M\xe9xico",lngLat:[-99.91287720907991,16.828940930185748]},{titulo:"Apartamento, Argentina",descripcion:"Lujoso apartamento en el coraz\xf3n de Buenos Aires, Argentina",lngLat:[-58.430166677283445,-34.57150108832866]},{titulo:"Local comercial, Espa\xf1a",descripcion:"Local comercial disponible en Madrid, Espa\xf1a, cerca de El Jard\xedn Secreto.",lngLat:[-3.7112735618380177,40.42567285425766]}]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-propiedades"]],decls:8,vars:1,consts:[[1,"row","mt-3","container"],[1,"col-2"],[1,"col"],[1,"row"],["class","col-4 mb-2",4,"ngFor","ngForOf"],[1,"col-4","mb-2"],[1,"card"],[1,"card-img-top",3,"inLngLat"],[1,"card-body",2,"color","black"],[1,"card-title"],[1,"card-text"]],template:function(t,a){1&t&&(o.TgZ(0,"div",0),o._UZ(1,"div",1),o.TgZ(2,"div",2)(3,"h1"),o._uU(4,"Lista de Propiedades"),o.qZA(),o._UZ(5,"hr"),o.TgZ(6,"div",3),o.YNc(7,x,8,3,"div",4),o.qZA()()()),2&t&&(o.xp6(7),o.Q6J("ngForOf",a.propiedades))},dependencies:[l.sg,v],encapsulation:2}),e})()},{path:"**",redirectTo:"fullscreen"}]}];let y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[d.Bz.forChild(Z),d.Bz]}),e})(),b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[l.ez,y]}),e})()}}]);